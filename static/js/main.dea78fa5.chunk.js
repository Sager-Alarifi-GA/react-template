(this.webpackJsonptest4=this.webpackJsonptest4||[]).push([[0],{39:function(e,t,a){e.exports=a(70)},44:function(e,t,a){},46:function(e,t,a){},52:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(18),o=a.n(s),l=(a(44),a(45),a(38)),c=a(7),i=a(8),u=a(10),m=a(9),d=a(11),h=(a(46),a(15)),p=a(34),f=function(e){var t=e.user,a=e.component,n=e.render,s=Object(p.a)(e,["user","component","render"]);return t&&n?r.a.createElement(h.b,Object.assign({},s,{render:n})):r.a.createElement(h.b,Object.assign({},s,{render:function(e){return t?r.a.createElement(a,e):r.a.createElement(h.a,{to:"/"})}}))},w=a(3),g=(a(52),r.a.createElement(r.a.Fragment,null,r.a.createElement(w.b,{to:"/change-password"},"Change Password"),r.a.createElement(w.b,{to:"/sign-out"},"Sign Out"))),b=r.a.createElement(r.a.Fragment,null,r.a.createElement(w.b,{to:"/sign-up"},"Sign Up"),r.a.createElement(w.b,{to:"/sign-in"},"Sign In")),E=r.a.createElement(r.a.Fragment,null,r.a.createElement(w.b,{to:"/"},"Home")),O=function(e){var t=e.user;return r.a.createElement("header",{className:"main-header"},r.a.createElement("h1",null,"Uber, But For Taxis"),r.a.createElement("nav",null,t&&r.a.createElement("span",null,"Welcome, ",t.email),t?g:b,E))},v=a(16),j={production:"hhttps://pacific-eyrie-74083.herokuapp.com/",development:"http://localhost:".concat(5e3)},C="localhost"===window.location.hostname?j.development:j.production,y=a(17),P=a.n(y),S=function(e){return P()({url:C+"/sign-in",method:"POST",data:{credentials:{email:e.email,password:e.password}}})},k="Succesfully registered! You've been signed in as well.",U="Registration failed. Email may be taked, or passwords don't match.",F="Welcome!",q="Failed to sign in. Check your email and password and try again.",N="Come back soon!",I="Password changed successfully!",D="Failed to change passwords. Check your old password and try again.",T=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleChange=function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},e.onSignUp=function(t){t.preventDefault();var a,n=e.props,r=n.alert,s=n.history,o=n.setUser;(a=e.state,P()({method:"POST",url:C+"/sign-up",data:{credentials:{email:a.email,password:a.password,password_confirmation:a.passwordConfirmation}}})).then((function(){return S(e.state)})).then((function(e){return o(e.data.user)})).then((function(){return r(k,"success")})).then((function(){return s.push("/")})).catch((function(t){console.error(t),e.setState({email:"",password:"",passwordConfirmation:""}),r(U,"danger")}))},e.state={email:"",password:"",passwordConfirmation:""},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.passwordConfirmation;return r.a.createElement("form",{className:"auth-form",onSubmit:this.onSignUp},r.a.createElement("h3",null,"Sign Up"),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{required:!0,name:"email",value:t,type:"email",placeholder:"Email",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{required:!0,name:"password",value:a,type:"password",placeholder:"Password",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"passwordConfirmation"},"Confirm Password"),r.a.createElement("input",{required:!0,name:"passwordConfirmation",value:n,type:"password",placeholder:"Confirm Password",onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Sign Up"))}}]),t}(n.Component),B=Object(h.f)(T),x=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleChange=function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},e.onSignIn=function(t){t.preventDefault();var a=e.props,n=a.alert,r=a.history,s=a.setUser;S(e.state).then((function(e){return s(e.data.user)})).then((function(){return n(F,"success")})).then((function(){return r.push("/")})).catch((function(t){console.error(t),e.setState({email:"",password:""}),n(q,"danger")}))},e.state={email:"",password:""},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("form",{className:"auth-form",onSubmit:this.onSignIn},r.a.createElement("h3",null,"Sign In"),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{required:!0,type:"email",name:"email",value:t,placeholder:"Email",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{required:!0,name:"password",value:a,type:"password",placeholder:"Password",onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Sign In"))}}]),t}(n.Component),A=Object(h.f)(x),H=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.alert,a=e.history,n=e.clearUser;(function(e){return P()({url:C+"/sign-out",method:"DELETE",headers:{Authorization:"Bearer ".concat(e.token)}})})(e.user).finally((function(){return t(N,"success")})).finally((function(){return a.push("/")})).finally((function(){return n()}))}},{key:"render",value:function(){return""}}]),t}(n.Component),z=Object(h.f)(H),J=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleChange=function(t){return e.setState(Object(v.a)({},t.target.name,t.target.value))},e.onChangePassword=function(t){t.preventDefault();var a=e.props,n=a.alert,r=a.history,s=a.user;(function(e,t){return P()({url:C+"/change-password",method:"PATCH",headers:{Authorization:"Bearer ".concat(t.token)},data:{passwords:{old:e.oldPassword,new:e.newPassword}}})})(e.state,s).then((function(){return n(I,"success")})).then((function(){return r.push("/")})).catch((function(t){console.error(t),e.setState({oldPassword:"",newPassword:""}),n(D,"danger")}))},e.state={oldPassword:"",newPassword:""},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.oldPassword,a=e.newPassword;return r.a.createElement("form",{className:"auth-form",onSubmit:this.onChangePassword},r.a.createElement("h3",null,"Change Password"),r.a.createElement("label",{htmlFor:"oldpw"},"Old Password"),r.a.createElement("input",{required:!0,name:"oldPassword",value:t,type:"password",placeholder:"Old Password",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"newPassword"},"New Password"),r.a.createElement("input",{required:!0,name:"newPassword",value:a,type:"password",placeholder:"New Password",onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Change Password"))}}]),t}(n.Component),W=Object(h.f)(J),L=a(23),M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={show:!0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.state.show?r.a.createElement(L.a,{key:this.props.index,dismissible:!0,variant:this.props.variant,onClose:function(){return e.setState({show:!1})}},r.a.createElement(L.a.Heading,null,this.props.message)):r.a.createElement(r.a.Fragment,null)}}]),t}(r.a.Component),R=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).setUser=function(t){return e.setState({user:t})},e.clearUser=function(){return e.setState({user:null})},e.alert=function(t,a){e.setState({alerts:[].concat(Object(l.a)(e.state.alerts),[{message:t,type:a}])})},e.state={user:null,alerts:[]},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.alerts,n=t.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{user:n}),a.map((function(e,t){return r.a.createElement(M,{key:t,variant:e.type,message:e.message})})),r.a.createElement("main",{className:"container"},r.a.createElement(h.b,{path:"/sign-up",render:function(){return r.a.createElement(B,{alert:e.alert,setUser:e.setUser})}}),r.a.createElement(h.b,{path:"/sign-in",render:function(){return r.a.createElement(A,{alert:e.alert,setUser:e.setUser})}}),r.a.createElement(f,{user:n,path:"/sign-out",render:function(){return r.a.createElement(z,{alert:e.alert,clearUser:e.clearUser,user:n})}}),r.a.createElement(f,{user:n,path:"/change-password",render:function(){return r.a.createElement(W,{alert:e.alert,user:n})}})))}}]),t}(n.Component),Y=r.a.createElement(w.a,null,r.a.createElement(R,null));o.a.render(Y,document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.dea78fa5.chunk.js.map